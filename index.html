<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Portofolio Emotcraft</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* ========== CSS STYLES ========== */
    :root {
      --bg: #000000;
      --card: #1c1c1c;
      --muted: #a0a0a0;
      --accent: #0f0f0f;
      --glass: rgba(255, 255, 255, 0.05);
      --radius: 14px;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Quicksand', 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    
    body {
      margin: 0;
      color: #f2f2f2;
      -webkit-font-smoothing: antialiased;
      min-height: 100vh;
      padding: 28px;
      background-color: var(--bg);
      position: relative;
    }
    
    footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      text-align: center;
      font-size: 12px;
      color: var(--muted);
      padding: 8px 0;
      background: transparent;
      z-index: 10;
    }
    
    /* Background animasi kotak */
    .bg-anim {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 2px;
      flex-wrap: wrap;
      overflow: hidden;
      z-index: -6;
    }
    
    .bg-anim::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background: linear-gradient(#000, rgb(124, 124, 124), #000);
      animation: animate 5s linear infinite;
    }
    
    @keyframes animate {
      0% { transform: translateY(-100%); }
      100% { transform: translateY(100%); }
    }
    
    .bg-anim span {
      position: relative;
      display: block;
      width: calc(6.25vw - 2px);
      height: calc(6.25vh - 2px);
      background: #181818;
      z-index: 2;
    }
    
    /* Header styling */
    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;         
      padding: 10px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.7);

      /* lapisan semi transparan */
      background: #1c1c1c;  
      backdrop-filter: blur(2px);      /* efek blur halus */
      -webkit-backdrop-filter: blur(4px); /* biar jalan di Safari */

      z-index: 100;
      box-sizing: border-box;
    }

    
    .brand {
      display: flex;
      gap: 30px;
      align-items: center;
    }
    
    .logo {
      width: 100px;
      height: 100px;
      border-radius: 10px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .logo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      cursor: pointer;
    }
    
    .brand-text {
      display: flex;
      flex-direction: column;
    }
    
    .brand-title {
      margin: 0 0 5px 0;
      font-size: 30px;
      font-weight: 700;
    }
    
    .brand-desc {
      margin: 0;
      color: var(--muted);
      font-size: 14px;
    }
    
    .controls {
      display: flex;
      gap: 10px;
      align-items: center;
      min-width: 280px;
      justify-content: flex-end;
      flex-wrap: wrap;
    }
    
    .search {
      background: #1c1c1c;
      border: 1px solid rgba(255, 255, 255, 0.12);
      padding: 8px 14px;
      border-radius: 20px;
      color: #f2f2f2;
      font-size: 14px;
      outline: none;
      transition: border 0.2s, background 0.2s;
      height: 36px;
    }
    
    .search::placeholder {
      color: var(--muted);
    }
    
    .search:focus {
      border: 1px solid var(--accent);
      background: #222;
    }
    
    .badge {
      font-size: 15px;
      padding: 6px 8px;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.05);
    }
    
    /* Tag action styling */
    .tag {
      display: inline-block;
      padding: 2px 6px;
      border-radius: 6px;
      font-size: 11px;
      font-weight: 300;
      color: #fff;
      margin-left: 6px;
      text-transform: capitalize;
    }
    
    .tag.creator { background: #e91e63; }
    .tag.gratis { background: #4caf50; }
    .tag.duduk { background: #007bff; }
    .tag.idle { background: #28a745; }
    .tag.pose { background: #6f42c1; }
    .tag.custom { background: #f26f17; }
    
    /* Button styling */
    .btn {
      flex: 1;
      padding: 8px 15px;
      border-radius: 10px;
      text-align: center;
      background: transparent;
      border: 1px solid rgba(255, 255, 255, 0.12);
      cursor: pointer;
      color: #f2f2f2;
      transition: background 0.2s;
    }
    
    .btn:hover {
      background: rgba(255, 255, 255, 0.08);
    }
    
    .btn.primary {
      background: var(--accent);
      color: #fff;
      border: none;
    }
    
    .btn.primary:hover {
      background: rgb(58, 58, 58);
    }
    
    .btn.buy-now {
      background: #ff0000;
      color: #fff;
      border: none;
    }
    
    .btn.buy-now:hover {
      background: #800000;
    }
    
    .btn-beli {
      flex: 1;
      padding: 8px 15px;
      border-radius: 10px;
      text-align: center;
      background: #f26f17;
      color: #fff;
      border: none;
      cursor: pointer;
      font-weight: 400;
      transition: background 0.2s;
    }
    
    .btn-beli:hover {
      background: #ed4f05;
    }
    
    /* Main content styling */
    main {
      margin-top: 18px;
      position: relative;
      z-index: 1;
    }
    
    .grid {
      margin-top: 120px; /* atur sesuai jarak yang kamu mau */
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 18px;
    }
    
    .card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 12px;
      border: 1px solid rgba(255, 255, 255, 0.05);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.7);
      transition: transform 0.18s ease, box-shadow 0.18s ease;
    }
    
    .card:hover {
      transform: translateY(-6px);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.8);
    }
    
    .thumb {
      border-radius: 10px;
      overflow: hidden;
      background: #1c1c1c;
      aspect-ratio: 1 / 1;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .thumb img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
/* === Efek Hover 3D untuk product thumbnail === */
.thumb.card-3d {
  position: relative;
  perspective: 1000px;
  overflow: visible;
}

.thumb.card-3d .card-bg {
  width: 100%;
  height: 100%;
  border-radius: 10px;
  background-size: cover;
  background-position: center;
  transition: transform 0.5s ease, box-shadow 0.5s ease;
  transform-style: preserve-3d;
}

.thumb.card-3d .character {
  position: absolute;
  bottom: -15%;
  left: 50%;
  transform: translateX(-50%) translateY(-10%);
  width: 120%;
  opacity: 0;
  pointer-events: none;
  transition: transform 0.6s ease, opacity 0.6s ease;
}

/* Hover effect */
.thumb.card-3d:hover .card-bg {
  transform: rotateX(15deg) translateY(20px) scale(0.95);
  box-shadow: 0 20px 50px rgba(0,0,0,0.8);
  opacity: 0.6;
}

.thumb.card-3d:hover .character {
  opacity: 1;
  transform: translateX(-50%) translateY(-20%);
}

    .meta {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 10px;
    }
    
    .title {
      font-weight: 600;
      font-size: 14px;
    }
    
    .price {
      background: var(--accent);
      padding: 6px 10px;
      border-radius: 10px;
      font-weight: 700;
      color: #fff;
    }
    
    .footer {
      display: flex;
      gap: 10px;
      margin-top: 10px;
      align-items: center;
    }
    
    /* Modal styling */
    .modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.7);
      z-index: 60;
    }
    
    .modal.open {
      display: flex;
    }
    
    .modal-card {
      width: min(920px, 94%);
      background: var(--card);
      border-radius: 14px;
      padding: 18px;
      border: 1px solid rgba(255, 255, 255, 0.08);
    }
    
    .modal-grid {
      display: grid;
      grid-template-columns: 1fr 320px;
      gap: 18px;
    }
    
    .modal-preview {
      aspect-ratio: 1 / 1;
      width: 100%;
      max-width: 420px;
      border-radius: 10px;
      overflow: hidden;
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .modal-preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .modal-side {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .text-muted {
      color: var(--muted);
    }
    
    @media (max-width: 720px) {
      .modal-grid {
        grid-template-columns: 1fr;
      }
      .modal-preview {
        height: 280px;
      }
    }
    
    /* Cara beli modal */
    #caraBeli {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: var(--card);
      padding: 24px;
      border-radius: var(--radius);
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.8);
      max-width: 600px;
      width: 90%;
      text-align: left;
      z-index: 70;
    }
    
    #caraBeli h2 {
      margin-top: 0;
      font-size: 20px;
    }
    
    #caraBeli p {
      margin: 8px 0;
      color: var(--muted);
    }
    
    .backBtn {
      margin-top: 14px;
      padding: 10px 14px;
      border-radius: 10px;
      background: var(--accent);
      border: none;
      cursor: pointer;
      color: #fff;
      font-weight: 600;
    }

    #nextSongBtn {
      flex: none;          /* ❌ biar ga ikut melar */
      width: auto;         /* ✅ ukurannya ikut isi teks */
      padding: 6px 12px;   /* lebih compact */
      font-size: 13px;
      border-radius: 8px;
    }
    #volumeControl {
      width: 100px;
      accent-color: #ffffff; /* warna oranye */
      cursor: pointer;
    }
    #m-desc {
      white-space: pre-line;
      line-height: 1.5;
    }
    
    /* Info button styling */
    #infoBtn {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: #333;
      color: #fff;
      font-weight: bold;
      font-size: 18px;
      width: 35px;
      height: 35px;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      z-index: 1000;
    }
    
    #infoBox {
      position: fixed;
      bottom: 70px;
      left: 20px;
      background: #1c1c1c;
      color: #fff;
      padding: 15px;
      border-radius: 10px;
      width: 350px;
      display: none;
      font-size: 13px;
      z-index: 1000;
    }
    
    #infoBox h3 {
      margin-top: 0;
      font-size: 16px;
    }
    
    #infoBox ul {
      margin: 0;
      padding-left: 18px;
    }
  </style>
</head>
<body>
  <!-- ========== BACKGROUND ANIMATION ========== -->
  <section class="bg-anim">
    <!-- Saya telah mengurangi jumlah span untuk performa -->
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>  
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>  
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>  
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>  
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>  
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
  </section>

  <!-- ========== HEADER ========== -->
  <header>
    <div class="brand">
      <div class="logo">
        <img src="asset/logo.gif" alt="Logo Emotcraft" id="logoBtn">
      </div>
      <div class="brand-text">
        <h1 class="brand-title">RefaStore</h1>
        <p class="brand-desc">Emot custom siap pilih. Preview, nama, dan harga tersedia.</p>
      </div>
    </div>


    <div class="controls">
      <button id="nextSongBtn" class="btn" style="display:none;">Next</button>
      <input id="volumeControl" type="range" min="0" max="1" step="0.05" value="1" title="Volume" style="display:none;">
      <input id="search" class="search" placeholder="Cari nama emot...">
      <select id="sortPrice" class="search">
        <option value="">Urutkan Harga</option>
        <option value="asc">Termurah → Termahal</option>
        <option value="desc">Termahal → Termurah</option>
      </select>
      <select id="filterAction" class="search">
        <option value="">Semua Action</option>
        <option value="duduk">Duduk</option>
        <option value="idle">Idle</option>
        <option value="pose">Pose</option>
        <option value="gratis">Gratis</option>
        <option value="custom">Custom</option>
      </select>
      <select id="filterCreator" class="search">
        <option value="">Semua Pembuat</option>
        <option value="RefaMc">RefaMc</option>
        <option value="Shinn_">Shinn_</option>
        <option value="Ghathfan_">Ghathfan_</option>
      </select>
      <div class="badge">Total: <span id="total">0</span></div>
      <button id="caraBeliBtn" class="btn">Cara Beli</button>
    </div>
  </header>

  <!-- ========== INFO BUTTON ========== -->
  <div id="infoBtn">i</div>
  <div id="infoBox">
    <h3>Fitur Website</h3>
    <ul>
      <li>Cari emot dengan kolom pencarian</li>
      <li>Urutkan berdasarkan harga</li>
      <li>Filter berdasarkan action</li>
      <li>Filter berdasarkan pembuat</li>
      <li>Klik logo untuk ganti ke Mode JJ / kembali normal</li>
      <li>Klik Next Song untuk ganti lagu (Mode JJ)</li>
      <li>Reload untuk stop lagu</li>
    </ul>
  </div>

  <!-- ========== MAIN CONTENT ========== -->
  <main>
    <div id="catalog">
      <div class="grid" id="grid"></div>
    </div>

    <div id="caraBeli">
      <h2>Cara Membeli Emot</h2>
      <p>1. Pilih emot yang kamu suka, atau custom, klik tombol <b>Detail</b> atau <b>Beli</b>.</p>
      <p>2. Catat ID emot (contoh: EC-001) untuk memudahkan order jika ingin membeli emote yang sudah ada.</p>
      <p>3. Hubungi admin via DM Discord dan kirim ID emot.</p>
      <p>4. Request Emote yang ingin dibuat.</p>
      <p>5. Emot akan dikirim setelah pembayaran terkonfirmasi.</p>
      <div style="margin-top:20px">
        <h3>Tutorial Video</h3>
        <iframe width="100%" height="315" src="https://www.youtube.com/embed/d8ML1HBQaaA"
          title="YouTube video tutorial" frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen>
        </iframe>
      </div>
      <button class="backBtn" id="backBtn">← Kembali ke Katalog</button>
    </div>
  </main>

  <!-- ========== MODAL ========== -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modal-card">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <div>
          <h3 id="m-name" style="margin:0">Nama Emot</h3>
          <div class="text-muted" id="m-id">ID: -</div>
        </div>
        <div style="display:flex;gap:8px;align-items:center">
          <div id="m-price" class="price">Rp0</div>
          <button id="closeModal" class="btn">Tutup</button>
        </div>
      </div>
      <div class="modal-grid">
        <div class="modal-preview" id="m-preview">
          <img src="" alt="Preview GIF" id="m-img">
        </div>
        <div class="modal-side">
          <p class="text-muted" id="m-desc">Deskripsi singkat emot akan tampil di sini.</p>
          <div style="margin-top:auto; display: flex; gap: 10px;">
            <button id="copyId" class="btn">Salin ID Emot</button>
            <button id="buyBtn" class="btn-beli">Beli Sekarang</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ========== FOOTER ========== -->
  <footer>
    Creator @RefaMc @Shinn_ @Ghathfan_ | Powered by RefaStore
  </footer>

<!-- ========== BACKGROUND MUSIC ========== -->
<audio id="bgMusic" loop>
  <source src="asset/song/song.mp3" type="audio/mpeg">
  Browser kamu tidak mendukung audio.
</audio>

<!-- Mode JJ -->
<audio id="jjMusic" loop>
  <source src="" type="audio/mpeg">
  Browser kamu tidak mendukung audio.
</audio>

  <!-- ========== JAVASCRIPT ========== -->
  <script>
// ========== MODE JJ ==========
let isJJMode = false;
let currentSongIndex = 0;
const jjSongs = [
  { file: 'asset/song/jj_song1.mp3', title: 'Lagu 1 - JJ We Dont Tack Anymore' },
  { file: 'asset/song/jj_song2.mp3', title: 'Lagu 2 - JJ Kasih Aba Aba' },
  { file: 'asset/song/jj_song3.mp3', title: 'Lagu 3 - JJ Y Que Fue Lamane ' },
  { file: 'asset/song/jj_song4.mp3', title: 'Lagu 4 - JJ Pica Pica ' },
];
// Volume control
const volumeControl = document.getElementById('volumeControl');
const bgAudio = document.getElementById('bgMusic');
const jjAudio = document.getElementById('jjMusic');

volumeControl.addEventListener('input', () => {
  if (isJJMode) { // cuma berfungsi di Mode JJ
    jjAudio.volume = parseFloat(volumeControl.value);
  }
})
// === INFO BUTTON ===
const infoBtn = document.getElementById('infoBtn');
const infoBox = document.getElementById('infoBox');

infoBtn.addEventListener('click', () => {
  if (infoBox.style.display === 'block') {
    infoBox.style.display = 'none';
  } else {
    infoBox.style.display = 'block';
  }
});
document.addEventListener('click', (e) => {
  if (!infoBox.contains(e.target) && e.target !== infoBtn) {
    infoBox.style.display = 'none';
  }
});
const nextSongBtn = document.getElementById('nextSongBtn');
const logoBtn = document.getElementById('logoBtn');
const brandTitle = document.querySelector('.brand-title');
const brandDesc = document.querySelector('.brand-desc');

function playRandomJJSong() {
  currentSongIndex = Math.floor(Math.random() * jjSongs.length);
  const jjAudio = document.getElementById('jjMusic');
  
  jjAudio.src = jjSongs[currentSongIndex].file;
  jjAudio.load();
  jjAudio.play().catch(e => console.log('Autoplay blocked:', e));
  
  nextSongBtn.style.display = 'block';
  updateSongTitle();
}

function nextSong() {
  if (isJJMode) {
    currentSongIndex = (currentSongIndex + 1) % jjSongs.length;
    const jjAudio = document.getElementById('jjMusic');

    jjAudio.src = jjSongs[currentSongIndex].file;
    jjAudio.load();

    // tambahin .catch biar kalau browser blokir nggak error
    jjAudio.play().catch(e => {
      console.log('Play blocked, perlu klik manual:', e);
    });

    updateSongTitle();
  }
}
function updateSongTitle() {
  if (isJJMode) {
    brandDesc.textContent = `Now Playing: ${jjSongs[currentSongIndex].title}`;
  } else {
    brandDesc.textContent = 'Emot custom siap pilih. Preview, nama, dan harga tersedia.';
  }
}

logoBtn.addEventListener('click', function() {
  const bgAudio = document.getElementById('bgMusic');
  const jjAudio = document.getElementById('jjMusic');

if (!isJJMode) {
  // Masuk Mode JJ
  isJJMode = true;
  logoBtn.src = 'asset/logo_jj.gif';
  brandTitle.textContent = 'RefaStore Mode JJ';
  bgAudio.pause();
  playRandomJJSong();
  volumeControl.style.display = 'block'; // 🎚️ tampilkan slider
} else {
  // Kembali Normal
  isJJMode = false;
  logoBtn.src = 'asset/logo.gif';
  brandTitle.textContent = 'RefaStore';
  brandDesc.textContent = 'Emot custom siap pilih. Preview, nama, dan harga tersedia.';
  jjAudio.pause();
  bgAudio.play().catch(e => console.log('Autoplay blocked:', e));
  nextSongBtn.style.display = 'none';
  volumeControl.style.display = 'none'; // 🎚️ sembunyikan slider
}

});

nextSongBtn.addEventListener('click', nextSong);
    const emotData = [
// SLOT DATA EMOTE 1
{ 
  id: 'EC-001', 
  name: 'Nama Emote 1', 
  price: 8000, 
  bg: 'asset/emote/ec-001/bg.png', 
  char: 'asset/emote/ec-001/char.png', 
  gif: 'asset/emote/ec-001/cat.gif',   // << ini yg dipake di modal
  action: 'duduk', 
  creator: 'RefaMc',
  desc: `Update Emot Menyusul

- Kamu akan di arahkan ke DM Discord
- Kirimkan ID Emote (Contoh EC-001)
- Lakukan pembayaran
- Via Qris atau Transfer Bank

Selamat Bersenang senang`
},

    ];

    // DOM Elements
      const grid=document.getElementById('grid');
      const totalEl=document.getElementById('total');
      const modal=document.getElementById('modal');
      const mImg=document.getElementById('m-img');
      const mName=document.getElementById('m-name');
      const mId=document.getElementById('m-id');
      const mPrice=document.getElementById('m-price');
      const mDesc=document.getElementById('m-desc');
      const buyBtn=document.getElementById('buyBtn');
      const copyId=document.getElementById('copyId');
      const closeModal=document.getElementById('closeModal');
      const caraBeliBtn=document.getElementById('caraBeliBtn');
      const caraBeli=document.getElementById('caraBeli');
      const catalog=document.getElementById('catalog');
      const backBtn=document.getElementById('backBtn');

      const sortPrice = document.getElementById('sortPrice');
      const filterAction = document.getElementById('filterAction');
      const searchInput = document.getElementById('search');

      function formatIDR(n){return 'Rp'+n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,'.');}

function render(list){
  grid.innerHTML='';
  list.forEach(item=>{
    const card=document.createElement('div');card.className='card';

card.innerHTML = `
  <div class="thumb card-3d">
    <div class="card-bg" style="background-image:url('${item.bg}')"></div>
    <img class="character" src="${item.char}" alt="${item.name}">
  </div>

  <div class="meta">
    <div class="title">
      ${item.name}
      <span class="tag ${item.action}">${item.action}</span>
      <span class="tag creator">${item.creator}</span>
    </div>
    <div class="price">${formatIDR(item.price)}</div>
  </div>

  <div class="footer">
    <button class="btn" data-id="${item.id}">Detail</button>
    <button class="btn-beli" data-buy="${item.id}">Beli</button>
  </div>`;
      
    grid.appendChild(card);
  });
  totalEl.textContent=list.length;
}


  const filterCreator = document.getElementById('filterCreator');

  function applyFilters(){
    let list = [...emotData];

    const actionVal = filterAction.value;
    if(actionVal) list = list.filter(item => item.action === actionVal);

    const creatorVal = filterCreator.value;
    if(creatorVal) list = list.filter(item => item.creator === creatorVal);

    const searchVal = searchInput.value.toLowerCase();
    if(searchVal) {
      list = list.filter(item => 
        item.name.toLowerCase().includes(searchVal) || 
        item.id.toLowerCase().includes(searchVal) ||
        item.desc.toLowerCase().includes(searchVal)
      );
    }

    const sortVal = sortPrice.value;
    if(sortVal==='asc') list.sort((a,b)=>a.price-b.price);
    if(sortVal==='desc') list.sort((a,b)=>b.price-a.price);

    render(list);
  }

  filterCreator.addEventListener('change', applyFilters);

function openModal(item){
  mImg.src = item.gif;
  mName.textContent = item.name;
  mId.textContent = 'ID: ' + item.id;
  mPrice.textContent = formatIDR(item.price);
  mDesc.textContent = item.desc;
  modal.classList.add('open');
  modal.setAttribute('aria-hidden','false');

  copyId.onclick = () => {
    if (navigator.clipboard) {
      navigator.clipboard.writeText(item.id).then(() => {
        const notif = document.createElement('div');
        notif.textContent = 'ID disalin: ' + item.id;
        notif.style.position = 'fixed';
        notif.style.bottom = '20px';
        notif.style.right = '20px';
        notif.style.background = 'var(--accent)';
        notif.style.color = '#fff';
        notif.style.padding = '10px 16px';
        notif.style.borderRadius = '10px';
        notif.style.boxShadow = '0 4px 12px rgba(0,0,0,0.5)';
        notif.style.zIndex = 1000;
        document.body.appendChild(notif);
        setTimeout(() => notif.remove(), 2000);
      });
    }
  };
}

// Listener tombol "Detail" di card
document.addEventListener('click', e => {
  // Tombol detail (data-id)
  if(e.target.matches('[data-id]')){
    const id = e.target.getAttribute('data-id');
    const it = emotData.find(x => x.id===id);
    if(it) openModal(it);
  }

  // Tombol beli/download (data-buy)
  if(e.target.matches('[data-buy]')){
    const id = e.target.getAttribute('data-buy');
    const it = emotData.find(x => x.id===id);

    if(it){
      if(it.price === 0 && it.file){
        // Kalau gratis → langsung ke link Mediafire
        window.open(it.file, '_blank');
      } else {
        // Kalau berbayar → ke Discord
        window.open('https://discord.com/users/1314418929090695251', '_blank');
      }
    }
  }
});

      buyBtn.onclick = () => { window.open('https://discord.com/users/1314418929090695251', '_blank'); };
      closeModal.addEventListener('click',()=>{modal.classList.remove('open');modal.setAttribute('aria-hidden','true');});
      modal.addEventListener('click',ev=>{if(ev.target===modal){modal.classList.remove('open');modal.setAttribute('aria-hidden','true');}});
      caraBeliBtn.addEventListener('click',()=>{catalog.style.display='none';caraBeli.style.display='block';});
      backBtn.addEventListener('click',()=>{caraBeli.style.display='none';catalog.style.display='block';});
      sortPrice.addEventListener('change',applyFilters);
      filterAction.addEventListener('change',applyFilters);
      searchInput.addEventListener('input',applyFilters);

      render(emotData);
    </script>
  </body>
  </html>

